description: <Driver Description>
macros:
- type: StringMacro
  name: ADDR
  description: Macro desc
- type: StringMacro
  name: CAMSERVER_PORT
  description: Macro desc
- type: StringMacro
  name: P
  description: Macro desc
- type: StringMacro
  name: PORT
  description: Macro desc
- type: StringMacro
  name: R
  description: Macro desc
- type: StringMacro
  name: TIMEOUT
  description: Macro desc
template: <path-to-template>/pilatus.template
includes:
- path: <path-to-yaml>/ADBase.pvi.yaml
- path: <path-to-yaml>/NDFile.pvi.yaml
- path: <path-to-yaml>/pilatus_detail.pvi.yaml
producer:
  type: AsynProducer
  prefix: $(P)$(R)
  asyn_port: $(PORT)
  address: $(ADDR)
  timeout: $(TIMEOUT)
formatter:
  type: DLSFormatter
components:
- type: ComponentGroup
  name: ComponentGroupOne
  children:
  - type: AsynBinary
    name: ResetPower
    description: ResetPower
    drv_info: RESET_POWER
    role: Action
    record_fields:
      ONAM: Reset
      ZNAM: Done
  - type: AsynBusy
    name: ThresholdApply
    description: ThresholdApply
    drv_info: THRESHOLD_APPLY
    role: Action
    record_fields:
      ONAM: Apply
      ZNAM: Done
  - type: AsynFloat64
    name: ImageFileTmot
    description: Timeout for image file
    drv_info: IMAGE_FILE_TMOT
    role: Action
    autosave:
    - VAL
    initial: 20.0
    record_fields:
      EGU: s
      PREC: 3
  - type: AsynFloat64
    name: Wavelength
    description: Wavelength
    drv_info: WAVELENGTH
    role: Action
    autosave:
    - VAL
    initial: 1.54
    record_fields:
      EGU: Angstroms
      PREC: 4
  - type: AsynFloat64
    name: EnergyLow
    description: EnergyLow
    drv_info: ENERGY_LOW
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: eV
      PREC: 3
  - type: AsynFloat64
    name: EnergyHigh
    description: EnergyHigh
    drv_info: ENERGY_HIGH
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: eV
      PREC: 3
  - type: AsynFloat64
    name: DetDist
    description: DetDist
    drv_info: DET_DIST
    role: Action
    autosave:
    - VAL
    initial: 1000.0
    record_fields:
      EGU: mm
      PREC: 3
  - type: AsynFloat64
    name: DetVOffset
    description: DetVOffset
    drv_info: DET_VOFFSET
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: mm
      PREC: 3
  - type: AsynFloat64
    name: BeamX
    description: BeamX
    drv_info: BEAM_X
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: pixels
      PREC: 3
  - type: AsynFloat64
    name: BeamY
    description: BeamY
    drv_info: BEAM_Y
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: pixels
      PREC: 3
  - type: AsynFloat64
    name: Flux
    description: Flux
    drv_info: FLUX
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: ph/s
      PREC: 4
  - type: AsynFloat64
    name: FilterTransm
    description: FilterTransm
    drv_info: FILTER_TRANSM
    role: Action
    autosave:
    - VAL
    initial: 1.0
    record_fields:
      PREC: 4
  - type: AsynFloat64
    name: StartAngle
    description: StartAngle
    drv_info: START_ANGLE
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: AngleIncr
    description: AngleIncr
    drv_info: ANGLE_INCR
    role: Action
    autosave:
    - VAL
    initial: 0.1
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Det2theta
    description: Det2theta
    drv_info: DET_2THETA
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Polarization
    description: Polarization
    drv_info: POLARIZATION
    role: Action
    autosave:
    - VAL
    initial: 0.99
    record_fields:
      PREC: 4
  - type: AsynFloat64
    name: Alpha
    description: Alpha
    drv_info: ALPHA
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Kappa
    description: Kappa
    drv_info: KAPPA
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Phi
    description: Phi
    drv_info: PHI
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: PhiIncr
    description: PhiIncr
    drv_info: PHI_INCR
    role: Action
    initial: 0.1
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Chi
    description: Chi
    drv_info: CHI
    role: Action
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: ChiIncr
    description: ChiIncr
    drv_info: CHI_INCR
    role: Action
    initial: 0.1
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: Omega
    description: Omega
    drv_info: OMEGA
    role: Action
    initial: 0.0
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynFloat64
    name: OmegaIncr
    description: OmegaIncr
    drv_info: OMEGA_INCR
    role: Action
    initial: 0.1
    record_fields:
      EGU: deg
      PREC: 4
  - type: AsynString
    name: OscillAxis
    description: OscillAxis
    drv_info: OSCILL_AXIS
    role: Action
    autosave:
    - VAL
    initial: X, CW
  - type: AsynLong
    name: NumOscill
    description: NumOscill
    drv_info: NUM_OSCILL
    role: Action
    autosave:
    - VAL
    initial: 1
  - type: AsynWaveform
    name: BadPixelFile
    description: BadPixelFile
    drv_info: BAD_PIXEL_FILE
    role: Action
    autosave:
    - VAL
    initial: '0'
    record_fields:
      FTVL: CHAR
      NELM: '256'
  - type: AsynWaveform
    name: FlatFieldFile
    description: FlatFieldFile
    drv_info: FLAT_FIELD_FILE
    role: Action
    autosave:
    - VAL
    initial: '0'
    record_fields:
      FTVL: CHAR
      NELM: '256'
  - type: AsynWaveform
    name: CbfTemplateFile
    description: CbfTemplateFile
    drv_info: CBFTEMPLATEFILE
    role: Action
    autosave:
    - VAL
    initial: '0'
    record_fields:
      FTVL: CHAR
      NELM: '256'
  - type: AsynWaveform
    name: HeaderString
    description: HeaderString
    drv_info: HEADERSTRING
    role: Action
    autosave:
    - VAL
    initial: '0'
    record_fields:
      FTVL: CHAR
      NELM: '68'
  - type: AsynBinary
    name: Armed
    description: Armed
    drv_info: ARMED
    role: Readback
    read_record_suffix: Armed
    record_fields:
      ONAM: Armed
      ZNAM: Unarmed
  - type: AsynLong
    name: NumBadPixels
    description: Number of bad pixels
    drv_info: NUM_BAD_PIXELS
    role: Readback
    read_record_suffix: NumBadPixels
  - type: AsynBinary
    name: FlatFieldValid
    description: Flat field valid
    drv_info: FLAT_FIELD_VALID
    role: Readback
    read_record_suffix: FlatFieldValid
    record_fields:
      ONAM: Yes
      ZNAM: No
  - type: AsynInt32
    name: PixelCutOff
    description: PixelCutOff_RBV
    drv_info: PIXEL_CUTOFF
    role: Readback
    record_fields:
      EGU: counts
  - type: AsynFloat64
    name: Temp0
    description: Temp0_RBV
    drv_info: TH_TEMP_0
    role: Readback
    record_fields:
      EGU: C
      PREC: 1
  - type: AsynFloat64
    name: Temp1
    description: Temp1_RBV
    drv_info: TH_TEMP_1
    role: Readback
    record_fields:
      EGU: C
      PREC: 1
  - type: AsynFloat64
    name: Temp2
    description: Temp2_RBV
    drv_info: TH_TEMP_2
    role: Readback
    record_fields:
      EGU: C
      PREC: 1
  - type: AsynFloat64
    name: Humid0
    description: Humid0_RBV
    drv_info: TH_HUMID_0
    role: Readback
    record_fields:
      EGU: '%'
      PREC: 1
  - type: AsynFloat64
    name: Humid1
    description: Humid1_RBV
    drv_info: TH_HUMID_1
    role: Readback
    record_fields:
      EGU: '%'
      PREC: 1
  - type: AsynFloat64
    name: Humid2
    description: Humid2_RBV
    drv_info: TH_HUMID_2
    role: Readback
    record_fields:
      EGU: '%'
      PREC: 1
  - type: AsynString
    name: TVXVersion
    description: TVXVersion_RBV
    drv_info: TVXVERSION
    role: Readback
  - type: AsynLong
    name: ResetPowerTime
    description: Reset module power wait time
    drv_info: RESET_POWER_TIME
    initial: 1
    record_fields:
      EGU: Seconds
  - type: AsynFloat64
    name: DelayTime
    description: DelayTime
    drv_info: DELAY_TIME
    autosave:
    - VAL
    initial: 0.0
    record_fields:
      EGU: s
      PREC: 6
  - type: AsynFloat64
    name: ThresholdEnergy
    description: Energy threshold
    drv_info: THRESHOLD
    autosave:
    - VAL
    initial: 10.0
    record_fields:
      EGU: keV
      PREC: 3
  - type: AsynBinary
    name: ThresholdAutoApply
    description: ThresholdAutoApply
    drv_info: THRESHOLD_AUTO_APPLY
    autosave:
    - VAL
    initial: 1
    record_fields:
      ONAM: Yes
      ZNAM: No
  - type: AsynFloat64
    name: Energy
    description: X-ray Energy
    drv_info: ENERGY
    initial: 20.0
    record_fields:
      EGU: keV
      PREC: 3
  - type: AsynLong
    name: MinFlatField
    description: Minimum flat field value
    drv_info: MIN_FLAT_FIELD
    autosave:
    - VAL
    initial: 100
    record_fields:
      EGU: Counts
  - type: AsynMultiBitBinary
    name: GapFill
    description: GapFill
    drv_info: GAP_FILL
    autosave:
    - VAL
    initial: 0
    record_fields:
      ONST: '0'
      ONVL: '0'
      TWST: '-1'
      TWVL: '-1'
      ZRST: N.A.
      ZRVL: '2'
